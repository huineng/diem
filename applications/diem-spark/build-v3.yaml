before_install:
  - conveyor artifactory init -s sets
script:
  - docker login -u=$AF_USER -p="$AF_PWD" "txo-sets-docker-local.artifactory.swg-devops.com"
  - docker build -f deploy/Dockerfile-spark-py-$(cat version-spark-3.txt) -t $DOCKER_REGISTRY/etl-mgr/etl-spark-py:$(cat version-spark-3.txt) .
  - docker build -f deploy/Dockerfile-spark-$(cat version-spark-3.txt) -t $DOCKER_REGISTRY/etl-mgr/etl-spark:$(cat version-spark-3.txt) .
deploy:
  - docker push $DOCKER_REGISTRY/etl-mgr/etl-spark-py:$(cat version-spark-3.txt)|| checkForStepFailure $? "docker push"
  - docker push $DOCKER_REGISTRY/etl-mgr/etl-spark:$(cat version-spark-3.txt)|| checkForStepFailure $? "docker push"
